"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/socket";
exports.ids = ["pages/api/socket"];
exports.modules = {

/***/ "lodash":
/*!*************************!*\
  !*** external "lodash" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("lodash");

/***/ }),

/***/ "Socket.IO":
/*!****************************!*\
  !*** external "Socket.IO" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("Socket.IO");;

/***/ }),

/***/ "(api)/./pages/api/socket.ts":
/*!*****************************!*\
  !*** ./pages/api/socket.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var Socket_IO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! Socket.IO */ \"Socket.IO\");\n/* harmony import */ var _server_src_socket_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../server_src/socket/events */ \"(api)/./server_src/socket/events.ts\");\n/* harmony import */ var _src_utils_const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../src/utils/const */ \"(api)/./src/utils/const.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([Socket_IO__WEBPACK_IMPORTED_MODULE_0__]);\nSocket_IO__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nlet gameData = {\n    started: false,\n    quizStarted: false,\n    quizNumber: -1,\n    totalQuestions: -1,\n    startedTime: 0,\n    pin: \"\",\n    resultStep: -1\n};\nlet players = {};\nlet counter = _src_utils_const__WEBPACK_IMPORTED_MODULE_2__.NOT_COUNTING;\nlet quizData = {\n    q: \"\",\n    video: \"\",\n    answers: []\n};\nlet quizAnswers = {};\nlet quizResult = {\n    answers: [],\n    correctAnswer: -1,\n    title: \"\"\n};\nconst dataUpdater = (socketData)=>{\n    gameData = socketData.gameData;\n    counter = socketData.counter;\n    players = socketData.players;\n    quizData = socketData.quizData;\n    quizAnswers = socketData.quizAnswers;\n    quizResult = socketData.quizResult;\n};\nconst SocketHandler = (req, res)=>{\n    if (!res.socket.server.io) {\n        const io = new Socket_IO__WEBPACK_IMPORTED_MODULE_0__.Server(res.socket.server);\n        res.socket.server.io = io;\n        io.on(\"connection\", (socket)=>{\n            (0,_server_src_socket_events__WEBPACK_IMPORTED_MODULE_1__.connectPlayer)({\n                gameData,\n                counter,\n                players,\n                quizData,\n                quizAnswers,\n                quizResult\n            }, io, socket, dataUpdater);\n            Object.keys(_server_src_socket_events__WEBPACK_IMPORTED_MODULE_1__.events).forEach((event)=>{\n                const eventType = event;\n                socket.on(event, (msg)=>{\n                    const eventFn = _server_src_socket_events__WEBPACK_IMPORTED_MODULE_1__.events[eventType];\n                    eventFn(io, socket, {\n                        gameData,\n                        counter,\n                        players,\n                        quizData,\n                        quizAnswers,\n                        quizResult\n                    }, msg, dataUpdater);\n                });\n            });\n        });\n    }\n    res.end();\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SocketHandler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgU2VydmVyIH0gZnJvbSBcIlNvY2tldC5JT1wiO1xuaW1wb3J0IHtcbiAgR2FtZURhdGEsXG4gIFBsYXllcnMsXG4gIFF1aXpBbnN3ZXIsXG4gIFF1aXpSZXN1bHQsXG4gIFNvY2tldERhdGEsXG59IGZyb20gXCIuLi8uLi9zZXJ2ZXJfc3JjL2ludGVyZmFjZXNcIjtcbmltcG9ydCB7XG4gIGNvbm5lY3RQbGF5ZXIsXG4gIGV2ZW50cyxcbiAgU29ja2V0RXZlbnQsXG59IGZyb20gXCIuLi8uLi9zZXJ2ZXJfc3JjL3NvY2tldC9ldmVudHNcIjtcbmltcG9ydCB7IFF1aXpEYXRhIH0gZnJvbSBcIi4uLy4uL3NyYy9zdG9yZS9HYW1lU3RvcmVcIjtcbmltcG9ydCB7IE5PVF9DT1VOVElORyB9IGZyb20gXCIuLi8uLi9zcmMvdXRpbHMvY29uc3RcIjtcblxubGV0IGdhbWVEYXRhOiBHYW1lRGF0YSA9IHtcbiAgc3RhcnRlZDogZmFsc2UsXG4gIHF1aXpTdGFydGVkOiBmYWxzZSxcbiAgcXVpek51bWJlcjogLTEsXG4gIHRvdGFsUXVlc3Rpb25zOiAtMSxcbiAgc3RhcnRlZFRpbWU6IDAsXG4gIHBpbjogXCJcIixcbiAgcmVzdWx0U3RlcDogLTEsXG59O1xubGV0IHBsYXllcnM6IFBsYXllcnMgPSB7fTtcbmxldCBjb3VudGVyID0gTk9UX0NPVU5USU5HO1xubGV0IHF1aXpEYXRhOiBRdWl6RGF0YSA9IHsgcTogXCJcIiwgdmlkZW86IFwiXCIsIGFuc3dlcnM6IFtdIH07XG5sZXQgcXVpekFuc3dlcnM6IFF1aXpBbnN3ZXIgPSB7fTtcbmxldCBxdWl6UmVzdWx0OiBRdWl6UmVzdWx0ID0geyBhbnN3ZXJzOiBbXSwgY29ycmVjdEFuc3dlcjogLTEsIHRpdGxlOiBcIlwiIH07XG5cbmNvbnN0IGRhdGFVcGRhdGVyID0gKHNvY2tldERhdGE6IFNvY2tldERhdGEpID0+IHtcbiAgZ2FtZURhdGEgPSBzb2NrZXREYXRhLmdhbWVEYXRhO1xuICBjb3VudGVyID0gc29ja2V0RGF0YS5jb3VudGVyO1xuICBwbGF5ZXJzID0gc29ja2V0RGF0YS5wbGF5ZXJzO1xuICBxdWl6RGF0YSA9IHNvY2tldERhdGEucXVpekRhdGE7XG4gIHF1aXpBbnN3ZXJzID0gc29ja2V0RGF0YS5xdWl6QW5zd2VycztcbiAgcXVpelJlc3VsdCA9IHNvY2tldERhdGEucXVpelJlc3VsdDtcbn07XG5cbmNvbnN0IFNvY2tldEhhbmRsZXIgPSAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XG4gIGlmICghcmVzLnNvY2tldC5zZXJ2ZXIuaW8pIHtcbiAgICBjb25zdCBpbyA9IG5ldyBTZXJ2ZXIocmVzLnNvY2tldC5zZXJ2ZXIpO1xuICAgIHJlcy5zb2NrZXQuc2VydmVyLmlvID0gaW87XG5cbiAgICBpby5vbihcImNvbm5lY3Rpb25cIiwgKHNvY2tldCkgPT4ge1xuICAgICAgY29ubmVjdFBsYXllcihcbiAgICAgICAgeyBnYW1lRGF0YSwgY291bnRlciwgcGxheWVycywgcXVpekRhdGEsIHF1aXpBbnN3ZXJzLCBxdWl6UmVzdWx0IH0sXG4gICAgICAgIGlvLFxuICAgICAgICBzb2NrZXQsXG4gICAgICAgIGRhdGFVcGRhdGVyXG4gICAgICApO1xuXG4gICAgICBPYmplY3Qua2V5cyhldmVudHMpLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IGV2ZW50IGFzIFNvY2tldEV2ZW50O1xuICAgICAgICBzb2NrZXQub24oZXZlbnQsIChtc2cpID0+IHtcbiAgICAgICAgICBjb25zdCBldmVudEZuID0gZXZlbnRzW2V2ZW50VHlwZV07XG4gICAgICAgICAgZXZlbnRGbihcbiAgICAgICAgICAgIGlvLFxuICAgICAgICAgICAgc29ja2V0LFxuICAgICAgICAgICAgeyBnYW1lRGF0YSwgY291bnRlciwgcGxheWVycywgcXVpekRhdGEsIHF1aXpBbnN3ZXJzLCBxdWl6UmVzdWx0IH0sXG4gICAgICAgICAgICBtc2csXG4gICAgICAgICAgICBkYXRhVXBkYXRlclxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgcmVzLmVuZCgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU29ja2V0SGFuZGxlcjtcbiJdLCJuYW1lcyI6WyJTZXJ2ZXIiLCJjb25uZWN0UGxheWVyIiwiZXZlbnRzIiwiTk9UX0NPVU5USU5HIiwiZ2FtZURhdGEiLCJzdGFydGVkIiwicXVpelN0YXJ0ZWQiLCJxdWl6TnVtYmVyIiwidG90YWxRdWVzdGlvbnMiLCJzdGFydGVkVGltZSIsInBpbiIsInJlc3VsdFN0ZXAiLCJwbGF5ZXJzIiwiY291bnRlciIsInF1aXpEYXRhIiwicSIsInZpZGVvIiwiYW5zd2VycyIsInF1aXpBbnN3ZXJzIiwicXVpelJlc3VsdCIsImNvcnJlY3RBbnN3ZXIiLCJ0aXRsZSIsImRhdGFVcGRhdGVyIiwic29ja2V0RGF0YSIsIlNvY2tldEhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzb2NrZXQiLCJzZXJ2ZXIiLCJpbyIsIm9uIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJldmVudCIsImV2ZW50VHlwZSIsIm1zZyIsImV2ZW50Rm4iLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/socket.ts\n");

/***/ }),

/***/ "(api)/./server_src/socket/events.ts":
/*!*************************************!*\
  !*** ./server_src/socket/events.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"connectPlayer\": () => (/* binding */ connectPlayer),\n/* harmony export */   \"emitData\": () => (/* binding */ emitData),\n/* harmony export */   \"events\": () => (/* binding */ events),\n/* harmony export */   \"getOnlinePlayers\": () => (/* binding */ getOnlinePlayers)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_utils_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../src/utils/const */ \"(api)/./src/utils/const.ts\");\n\n\nconst getOnlinePlayers = (players)=>{\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().pickBy(players, (user)=>user.isOnline && user.isInRoom\n    );\n};\nconst getAnswerScore = (gameState, answerIndex)=>{\n    const qNumber = gameState.gameData.quizNumber;\n    const correctAnswer = quiz.questions[qNumber].answer;\n    const isCorrect = answerIndex === correctAnswer;\n    let score = 0;\n    if (isCorrect) {\n        score = 1;\n        const addrKeys = Object.keys(gameState.quizAnswers[qNumber]);\n        if (addrKeys && addrKeys.length > 0) {\n            addrKeys.forEach((addr)=>{\n                const answerItem = gameState.quizAnswers[qNumber][addr];\n                if (answerItem.answerIndex !== correctAnswer) {\n                    score = 2;\n                }\n            });\n        } else {\n            score = 2;\n        }\n    }\n    return score;\n};\nconst connectPlayer = (gameState, io, socket, updateData)=>{\n    const addr = socket.handshake.address;\n    const id = socket.id;\n    if (!gameState.players[addr]) {\n        gameState.players[addr] = {\n            name: \"\",\n            score: 0,\n            isOnline: true,\n            isInRoom: false,\n            id\n        };\n    } else {\n        gameState.players[addr].isOnline = true;\n        gameState.players[addr].id = id;\n    }\n    updateData(gameState);\n    emitData(gameState, io);\n};\nconst quiz = __webpack_require__(/*! ./../q001.json */ \"(api)/./server_src/q001.json\");\nconst emitData = (gameState, io)=>{\n    io.emit(\"online-players\", getOnlinePlayers(gameState.players));\n    io.emit(\"game-data\", gameState.gameData);\n    io.emit(\"quiz-counter\", gameState.counter);\n    io.emit(\"quiz-data\", gameState.quizData);\n    io.emit(\"quiz-result\", gameState.quizResult);\n    io.fetchSockets().then((sockets)=>{\n        sockets.forEach((socketItem)=>{\n            const addr = socketItem.handshake.address;\n            const qNumber = gameState.gameData.quizNumber;\n            let clientQuizAnswer = {\n                answerIndex: -1,\n                answerTime: new Date(),\n                answerScore: 0,\n                answerElapsed: 0\n            };\n            if (qNumber > -1 && gameState.quizAnswers[gameState.gameData.quizNumber][addr]) {\n                clientQuizAnswer = gameState.quizAnswers[gameState.gameData.quizNumber][addr];\n            }\n            socketItem.emit(\"answer-data\", {\n                answerIndex: clientQuizAnswer.answerIndex,\n                answerTime: clientQuizAnswer.answerTime.getTime(),\n                answerScore: clientQuizAnswer.answerScore,\n                answerElapsed: clientQuizAnswer.answerElapsed\n            });\n        });\n    });\n};\nconst getCurrentRanking = (data, players)=>{\n    let ranking = {};\n    Object.keys(data).forEach((quizQ)=>{\n        const quizQN = parseInt(quizQ, 10);\n        Object.keys(data[quizQN]).forEach((item)=>{\n            if (ranking[item]) {\n                ranking[item].score = ranking[item].score + data[quizQN][item].answerScore;\n                ranking[item].roundTime = data[quizQN][item].answerElapsed;\n                ranking[item].answeredQuestions = ranking[item].answeredQuestions + 1;\n                ranking[item].timeAvg = ranking[item].timeAvg + data[quizQN][item].answerElapsed;\n            } else {\n                ranking[item] = {\n                    name: players[item].name,\n                    score: data[quizQN][item].answerScore,\n                    roundTime: data[quizQN][item].answerElapsed,\n                    timeAvg: data[quizQN][item].answerElapsed,\n                    answeredQuestions: 1\n                };\n            }\n        });\n    });\n    const rankingArray = Object.keys(ranking).map((rankingItem)=>{\n        ranking[rankingItem].timeAvg = ranking[rankingItem].timeAvg / ranking[rankingItem].answeredQuestions;\n        return ranking[rankingItem];\n    });\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().sortBy(rankingArray, (el)=>el.score\n    ).reverse();\n};\nconst events = {\n    \"init-live\": (io, socket, gameState, msg)=>{\n        socket.data = {\n            liveInstance: true\n        };\n        socket.emit(\"game-data\", gameState.gameData);\n    },\n    \"end-game\": (io, socket, gameState, msg, updateData)=>{\n        gameState.gameData.started = false;\n        gameState.gameData.quizStarted = false;\n        gameState.gameData.quizNumber = -1;\n        gameState.gameData.startedTime = new Date().getTime();\n        gameState.gameData.pin = \"\";\n        Object.keys(gameState.players).forEach((pKey)=>{\n            const currPlayer = gameState.players[pKey];\n            gameState.players[pKey] = {\n                ...currPlayer,\n                name: \"\",\n                score: 0,\n                isInRoom: false\n            };\n        });\n        gameState.players = lodash__WEBPACK_IMPORTED_MODULE_0___default().pickBy(gameState.players, (p)=>{\n            return p.isOnline;\n        });\n        gameState.counter = _src_utils_const__WEBPACK_IMPORTED_MODULE_1__.NOT_COUNTING;\n        gameState.quizAnswers = {};\n        updateData(gameState);\n        emitData(gameState, io);\n    },\n    \"start-game\": (io, socket, gameState, msg, updateData)=>{\n        gameState.gameData.started = true;\n        gameState.gameData.quizStarted = false;\n        gameState.gameData.startedTime = new Date().getTime();\n        gameState.gameData.pin = lodash__WEBPACK_IMPORTED_MODULE_0___default().range(0, 6).map(()=>lodash__WEBPACK_IMPORTED_MODULE_0___default().random(0, 9)\n        ).join(\"\");\n        gameState.counter = _src_utils_const__WEBPACK_IMPORTED_MODULE_1__.NOT_COUNTING;\n        updateData(gameState);\n        emitData(gameState, io);\n    },\n    \"start-quiz\": (io, socket, gameState, msg, updateData)=>{\n        gameState.gameData.resultStep = -1;\n        gameState.counter = 3;\n        gameState.gameData.quizNumber = gameState.gameData.quizNumber + 1;\n        gameState.gameData.quizStarted = true;\n        gameState.quizAnswers[gameState.gameData.quizNumber] = {};\n        gameState.gameData.totalQuestions = quiz.questions.length;\n        emitData(gameState, io);\n        io.emit(\"quiz-counter\", _src_utils_const__WEBPACK_IMPORTED_MODULE_1__.GAME_STARTING);\n        const counterInterval = setInterval(()=>{\n            io.emit(\"quiz-counter\", gameState.counter);\n            if (gameState.counter === 0) {\n                const quizItem = quiz.questions[gameState.gameData.quizNumber];\n                gameState.quizData = {\n                    q: quizItem.question,\n                    video: quizItem.video,\n                    answers: quizItem.keyboard === \"TRUEFALSE\" ? [\n                        \"V\",\n                        \"F\"\n                    ] : quizItem.options\n                };\n                io.emit(\"quiz-data\", gameState.quizData);\n                clearInterval(counterInterval);\n                gameState.gameData.startedTime = new Date().getTime();\n                updateData(gameState);\n            } else {\n                gameState.counter--;\n                updateData(gameState);\n            }\n        }, 1000);\n    },\n    \"join-game\": (io, socket, gameState, msg, updateData)=>{\n        const addr = socket.handshake.address;\n        if (msg.pin === gameState.gameData.pin && gameState.gameData.started) {\n            gameState.players[addr].id = socket.id;\n            gameState.players[addr].isOnline = true;\n            gameState.players[addr].name = msg.name;\n            gameState.players[addr].isInRoom = true;\n            updateData(gameState);\n            emitData(gameState, io);\n        }\n    },\n    disconnect: (io, socket, gameState, msg, updateData)=>{\n        const addr = socket.handshake.address;\n        gameState.players[addr].isOnline = false;\n        updateData(gameState);\n        emitData(gameState, io);\n    },\n    \"answer-question\": (io, socket, gameState, answerIndex, updateData)=>{\n        const addr = socket.handshake.address;\n        const answerScore = getAnswerScore(gameState, answerIndex);\n        const answerResult = {\n            answerIndex,\n            answerTime: new Date(),\n            answerScore,\n            answerElapsed: new Date().getTime() - gameState.gameData.startedTime\n        };\n        if (!gameState.quizAnswers[gameState.gameData.quizNumber]) {\n            gameState.quizAnswers[gameState.gameData.quizNumber] = {};\n        }\n        gameState.quizAnswers[gameState.gameData.quizNumber][addr] = answerResult;\n        updateData(gameState);\n        emitData(gameState, io);\n    },\n    \"end-quiz\": (io, socket1, gameState, msg, updateData)=>{\n        gameState.counter = _src_utils_const__WEBPACK_IMPORTED_MODULE_1__.SHOW_RESULTS;\n        gameState.gameData.resultStep = 0;\n        const quizNumber = gameState.gameData.quizNumber;\n        const quizQuestion = quiz.questions[quizNumber];\n        let options;\n        switch(quizQuestion.keyboard){\n            case \"ABCD\":\n                var ref;\n                options = (ref = quizQuestion.options) === null || ref === void 0 ? void 0 : ref.map((q, i)=>i\n                );\n                break;\n            case \"TRUEFALSE\":\n                options = [\n                    true,\n                    false\n                ];\n        }\n        const resultsByAnswer = options.map((q, i)=>{\n            return {\n                answerCode: lodash__WEBPACK_IMPORTED_MODULE_0___default().isBoolean(q) ? [\n                    \"V\",\n                    \"F\"\n                ][i] : String.fromCharCode(65 + i),\n                people: Object.keys(lodash__WEBPACK_IMPORTED_MODULE_0___default().pickBy(gameState.quizAnswers[quizNumber], (addr)=>{\n                    return addr.answerIndex === q;\n                })).length\n            };\n        });\n        gameState.quizResult = {\n            title: quiz.title,\n            correctAnswer: quizQuestion.answer,\n            answers: resultsByAnswer\n        };\n        const ranking = getCurrentRanking(gameState.quizAnswers, gameState.players);\n        io.fetchSockets().then((sockets)=>{\n            const liveSockets = sockets.filter((socket)=>{\n                return socket.data.liveInstance;\n            });\n            console.log(liveSockets.length);\n            liveSockets.forEach((socket)=>{\n                socket.emit(\"data-ranking\", ranking);\n                console.log(\"emit\");\n            });\n        });\n        updateData(gameState);\n        emitData(gameState, io);\n    },\n    \"next-resultstep\": (io, socket, gameState, msg, updateData)=>{\n        if (gameState.gameData.resultStep < 2) {\n            gameState.gameData.resultStep = gameState.gameData.resultStep + 1;\n            updateData(gameState);\n            emitData(gameState, io);\n        } else {\n            events[\"start-quiz\"](io, socket, gameState, msg, updateData);\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjJCLFFBQVEsQ0FBQzNCLFNBQVMsRUFBRW9CLEVBQUUsQ0FBQyxDQUFDO0tBQ3pCO0lBQ0QsaUJBQWlCLEVBQUUsQ0FBQ0EsRUFBRSxFQUFFQyxNQUFNLEVBQUVyQixTQUFTLEVBQUU0RCxHQUFHLEVBQUV0QyxVQUFVLEdBQUs7UUFDN0QsSUFBSXRCLFNBQVMsQ0FBQ0csUUFBUSxDQUFDcUUsVUFBVSxHQUFHLENBQUMsRUFBRTtZQUNyQ3hFLFNBQVMsQ0FBQ0csUUFBUSxDQUFDcUUsVUFBVSxHQUFHeEUsU0FBUyxDQUFDRyxRQUFRLENBQUNxRSxVQUFVLEdBQUcsQ0FBQyxDQUFDO1lBQ2xFbEQsVUFBVSxDQUFDdEIsU0FBUyxDQUFDLENBQUM7WUFDdEIyQixRQUFRLENBQUMzQixTQUFTLEVBQUVvQixFQUFFLENBQUMsQ0FBQztTQUN6QixNQUFNO1lBQ0x1QyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUN2QyxFQUFFLEVBQUVDLE1BQU0sRUFBRXJCLFNBQVMsRUFBRTRELEdBQUcsRUFBRXRDLFVBQVUsQ0FBQyxDQUFDO1NBQzlEO0tBQ0Y7Q0FDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmVhdC10aGUtbXVzaWMvLi9zZXJ2ZXJfc3JjL3NvY2tldC9ldmVudHMudHM/ZDVlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXywgeyB1cGRhdGUgfSBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgeyBTZXJ2ZXIsIFNvY2tldCB9IGZyb20gXCJzb2NrZXQuaW9cIjtcbmltcG9ydCB7IERlZmF1bHRFdmVudHNNYXAgfSBmcm9tIFwic29ja2V0LmlvL2Rpc3QvdHlwZWQtZXZlbnRzXCI7XG5pbXBvcnQge1xuICBHQU1FX1NUQVJUSU5HLFxuICBOT1RfQ09VTlRJTkcsXG4gIFNIT1dfUkVTVUxUUyxcbn0gZnJvbSBcIi4uLy4uL3NyYy91dGlscy9jb25zdFwiO1xuaW1wb3J0IHtcbiAgUGxheWVycyxcbiAgUXVpekFuc3dlcixcbiAgUXVpekVudHJ5LFxuICBRdWl6UmVzdWx0QW5zd2VyLFxuICBSYW5raW5nRGF0YSxcbiAgU2luZ2xlQW5zd2VyLFxuICBTb2NrZXREYXRhLFxufSBmcm9tIFwiLi4vaW50ZXJmYWNlc1wiO1xuXG5leHBvcnQgdHlwZSBTb2NrZXRFdmVudCA9XG4gIHwgXCJpbml0LWxpdmVcIlxuICB8IFwic3RhcnQtZ2FtZVwiXG4gIHwgXCJlbmQtZ2FtZVwiXG4gIHwgXCJqb2luLWdhbWVcIlxuICB8IFwiZGlzY29ubmVjdFwiXG4gIHwgXCJzdGFydC1xdWl6XCJcbiAgfCBcImFuc3dlci1xdWVzdGlvblwiXG4gIHwgXCJlbmQtcXVpelwiXG4gIHwgXCJuZXh0LXJlc3VsdHN0ZXBcIjtcblxudHlwZSBJSU8gPSBTZXJ2ZXI8RGVmYXVsdEV2ZW50c01hcCwgRGVmYXVsdEV2ZW50c01hcCwgRGVmYXVsdEV2ZW50c01hcCwgYW55PjtcbnR5cGUgSVNvY2tldCA9IFNvY2tldDxcbiAgRGVmYXVsdEV2ZW50c01hcCxcbiAgRGVmYXVsdEV2ZW50c01hcCxcbiAgRGVmYXVsdEV2ZW50c01hcCxcbiAgYW55XG4+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50RGF0YUZuIHtcbiAgaW86IElJTztcbiAgc29ja2V0OiBJU29ja2V0O1xuICBnYW1lU3RhdGU6IFNvY2tldERhdGE7XG4gIG1zZzogYW55O1xuICB1cGRhdGVEYXRhOiAoZ2FtZVN0YXRlOiBTb2NrZXREYXRhKSA9PiB2b2lkO1xufVxuXG50eXBlIEV2ZW50RGF0YSA9IHtcbiAgW2sgaW4gU29ja2V0RXZlbnRdOiAoXG4gICAgaW86IElJTyxcbiAgICBzb2NrZXQ6IElTb2NrZXQsXG4gICAgZ2FtZVN0YXRlOiBTb2NrZXREYXRhLFxuICAgIG1zZzogYW55LFxuICAgIHVwZGF0ZURhdGE6IChnYW1lU3RhdGU6IFNvY2tldERhdGEpID0+IHZvaWRcbiAgKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldE9ubGluZVBsYXllcnMgPSAocGxheWVyczogUGxheWVycykgPT4ge1xuICByZXR1cm4gXy5waWNrQnkocGxheWVycywgKHVzZXIpID0+IHVzZXIuaXNPbmxpbmUgJiYgdXNlci5pc0luUm9vbSk7XG59O1xuXG5jb25zdCBnZXRBbnN3ZXJTY29yZSA9IChnYW1lU3RhdGU6IFNvY2tldERhdGEsIGFuc3dlckluZGV4OiBudW1iZXIpID0+IHtcbiAgY29uc3QgcU51bWJlciA9IGdhbWVTdGF0ZS5nYW1lRGF0YS5xdWl6TnVtYmVyO1xuICBjb25zdCBjb3JyZWN0QW5zd2VyID0gcXVpei5xdWVzdGlvbnNbcU51bWJlcl0uYW5zd2VyO1xuICBjb25zdCBpc0NvcnJlY3QgPSBhbnN3ZXJJbmRleCA9PT0gY29ycmVjdEFuc3dlcjtcbiAgbGV0IHNjb3JlID0gMDtcbiAgaWYgKGlzQ29ycmVjdCkge1xuICAgIHNjb3JlID0gMTtcbiAgICBjb25zdCBhZGRyS2V5cyA9IE9iamVjdC5rZXlzKGdhbWVTdGF0ZS5xdWl6QW5zd2Vyc1txTnVtYmVyXSk7XG4gICAgaWYgKGFkZHJLZXlzICYmIGFkZHJLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFkZHJLZXlzLmZvckVhY2goKGFkZHIpID0+IHtcbiAgICAgICAgY29uc3QgYW5zd2VySXRlbSA9IGdhbWVTdGF0ZS5xdWl6QW5zd2Vyc1txTnVtYmVyXVthZGRyXTtcbiAgICAgICAgaWYgKGFuc3dlckl0ZW0uYW5zd2VySW5kZXggIT09IGNvcnJlY3RBbnN3ZXIpIHtcbiAgICAgICAgICBzY29yZSA9IDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY29yZSA9IDI7XG4gICAgfVxuICB9XG4gIHJldHVybiBzY29yZTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb25uZWN0UGxheWVyID0gKFxuICBnYW1lU3RhdGU6IFNvY2tldERhdGEsXG4gIGlvOiBTZXJ2ZXI8RGVmYXVsdEV2ZW50c01hcCwgRGVmYXVsdEV2ZW50c01hcCwgRGVmYXVsdEV2ZW50c01hcCwgYW55PixcbiAgc29ja2V0OiBTb2NrZXQ8RGVmYXVsdEV2ZW50c01hcCwgRGVmYXVsdEV2ZW50c01hcCwgRGVmYXVsdEV2ZW50c01hcCwgYW55PixcbiAgdXBkYXRlRGF0YTogKGdhbWVTdGF0ZTogU29ja2V0RGF0YSkgPT4gdm9pZFxuKSA9PiB7XG4gIGNvbnN0IGFkZHIgPSBzb2NrZXQuaGFuZHNoYWtlLmFkZHJlc3M7XG4gIGNvbnN0IGlkID0gc29ja2V0LmlkO1xuICBpZiAoIWdhbWVTdGF0ZS5wbGF5ZXJzW2FkZHJdKSB7XG4gICAgZ2FtZVN0YXRlLnBsYXllcnNbYWRkcl0gPSB7XG4gICAgICBuYW1lOiBcIlwiLFxuICAgICAgc2NvcmU6IDAsXG4gICAgICBpc09ubGluZTogdHJ1ZSxcbiAgICAgIGlzSW5Sb29tOiBmYWxzZSxcbiAgICAgIGlkLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgZ2FtZVN0YXRlLnBsYXllcnNbYWRkcl0uaXNPbmxpbmUgPSB0cnVlO1xuICAgIGdhbWVTdGF0ZS5wbGF5ZXJzW2FkZHJdLmlkID0gaWQ7XG4gIH1cbiAgdXBkYXRlRGF0YShnYW1lU3RhdGUpO1xuICBlbWl0RGF0YShnYW1lU3RhdGUsIGlvKTtcbn07XG5cbmNvbnN0IHF1aXogPSByZXF1aXJlKFwiLi8uLi9xMDAxLmpzb25cIikgYXMgUXVpekVudHJ5O1xuXG5leHBvcnQgY29uc3QgZW1pdERhdGEgPSAoXG4gIGdhbWVTdGF0ZTogU29ja2V0RGF0YSxcbiAgaW86IFNlcnZlcjxEZWZhdWx0RXZlbnRzTWFwLCBEZWZhdWx0RXZlbnRzTWFwLCBEZWZhdWx0RXZlbnRzTWFwLCBhbnk+XG4pID0+IHtcbiAgaW8uZW1pdChcIm9ubGluZS1wbGF5ZXJzXCIsIGdldE9ubGluZVBsYXllcnMoZ2FtZVN0YXRlLnBsYXllcnMpKTtcbiAgaW8uZW1pdChcImdhbWUtZGF0YVwiLCBnYW1lU3RhdGUuZ2FtZURhdGEpO1xuICBpby5lbWl0KFwicXVpei1jb3VudGVyXCIsIGdhbWVTdGF0ZS5jb3VudGVyKTtcbiAgaW8uZW1pdChcInF1aXotZGF0YVwiLCBnYW1lU3RhdGUucXVpekRhdGEpO1xuICBpby5lbWl0KFwicXVpei1yZXN1bHRcIiwgZ2FtZVN0YXRlLnF1aXpSZXN1bHQpO1xuXG4gIGlvLmZldGNoU29ja2V0cygpLnRoZW4oKHNvY2tldHMpID0+IHtcbiAgICBzb2NrZXRzLmZvckVhY2goKHNvY2tldEl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGFkZHIgPSBzb2NrZXRJdGVtLmhhbmRzaGFrZS5hZGRyZXNzO1xuICAgICAgY29uc3QgcU51bWJlciA9IGdhbWVTdGF0ZS5nYW1lRGF0YS5xdWl6TnVtYmVyO1xuICAgICAgbGV0IGNsaWVudFF1aXpBbnN3ZXI6IFNpbmdsZUFuc3dlciA9IHtcbiAgICAgICAgYW5zd2VySW5kZXg6IC0xLFxuICAgICAgICBhbnN3ZXJUaW1lOiBuZXcgRGF0ZSgpLFxuICAgICAgICBhbnN3ZXJTY29yZTogMCxcbiAgICAgICAgYW5zd2VyRWxhcHNlZDogMCxcbiAgICAgIH07XG5cbiAgICAgIGlmIChcbiAgICAgICAgcU51bWJlciA+IC0xICYmXG4gICAgICAgIGdhbWVTdGF0ZS5xdWl6QW5zd2Vyc1tnYW1lU3RhdGUuZ2FtZURhdGEucXVpek51bWJlcl1bYWRkcl1cbiAgICAgICkge1xuICAgICAgICBjbGllbnRRdWl6QW5zd2VyID1cbiAgICAgICAgICBnYW1lU3RhdGUucXVpekFuc3dlcnNbZ2FtZVN0YXRlLmdhbWVEYXRhLnF1aXpOdW1iZXJdW2FkZHJdO1xuICAgICAgfVxuICAgICAgc29ja2V0SXRlbS5lbWl0KFwiYW5zd2VyLWRhdGFcIiwge1xuICAgICAgICBhbnN3ZXJJbmRleDogY2xpZW50UXVpekFuc3dlci5hbnN3ZXJJbmRleCxcbiAgICAgICAgYW5zd2VyVGltZTogY2xpZW50UXVpekFuc3dlci5hbnN3ZXJUaW1lLmdldFRpbWUoKSxcbiAgICAgICAgYW5zd2VyU2NvcmU6IGNsaWVudFF1aXpBbnN3ZXIuYW5zd2VyU2NvcmUsXG4gICAgICAgIGFuc3dlckVsYXBzZWQ6IGNsaWVudFF1aXpBbnN3ZXIuYW5zd2VyRWxhcHNlZCxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGdldEN1cnJlbnRSYW5raW5nID0gKGRhdGE6IFF1aXpBbnN3ZXIsIHBsYXllcnM6IFBsYXllcnMpID0+IHtcbiAgbGV0IHJhbmtpbmc6IFJhbmtpbmdEYXRhID0ge307XG4gIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goKHF1aXpRKSA9PiB7XG4gICAgY29uc3QgcXVpelFOID0gcGFyc2VJbnQocXVpelEsIDEwKTtcbiAgICBPYmplY3Qua2V5cyhkYXRhW3F1aXpRTl0pLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGlmIChyYW5raW5nW2l0ZW1dKSB7XG4gICAgICAgIHJhbmtpbmdbaXRlbV0uc2NvcmUgPVxuICAgICAgICAgIHJhbmtpbmdbaXRlbV0uc2NvcmUgKyBkYXRhW3F1aXpRTl1baXRlbV0uYW5zd2VyU2NvcmU7XG4gICAgICAgIHJhbmtpbmdbaXRlbV0ucm91bmRUaW1lID0gZGF0YVtxdWl6UU5dW2l0ZW1dLmFuc3dlckVsYXBzZWQ7XG4gICAgICAgIHJhbmtpbmdbaXRlbV0uYW5zd2VyZWRRdWVzdGlvbnMgPSByYW5raW5nW2l0ZW1dLmFuc3dlcmVkUXVlc3Rpb25zICsgMTtcbiAgICAgICAgcmFua2luZ1tpdGVtXS50aW1lQXZnID1cbiAgICAgICAgICByYW5raW5nW2l0ZW1dLnRpbWVBdmcgKyBkYXRhW3F1aXpRTl1baXRlbV0uYW5zd2VyRWxhcHNlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmtpbmdbaXRlbV0gPSB7XG4gICAgICAgICAgbmFtZTogcGxheWVyc1tpdGVtXS5uYW1lLFxuICAgICAgICAgIHNjb3JlOiBkYXRhW3F1aXpRTl1baXRlbV0uYW5zd2VyU2NvcmUsXG4gICAgICAgICAgcm91bmRUaW1lOiBkYXRhW3F1aXpRTl1baXRlbV0uYW5zd2VyRWxhcHNlZCxcbiAgICAgICAgICB0aW1lQXZnOiBkYXRhW3F1aXpRTl1baXRlbV0uYW5zd2VyRWxhcHNlZCxcbiAgICAgICAgICBhbnN3ZXJlZFF1ZXN0aW9uczogMSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgcmFua2luZ0FycmF5ID0gT2JqZWN0LmtleXMocmFua2luZykubWFwKChyYW5raW5nSXRlbSkgPT4ge1xuICAgIHJhbmtpbmdbcmFua2luZ0l0ZW1dLnRpbWVBdmcgPVxuICAgICAgcmFua2luZ1tyYW5raW5nSXRlbV0udGltZUF2ZyAvIHJhbmtpbmdbcmFua2luZ0l0ZW1dLmFuc3dlcmVkUXVlc3Rpb25zO1xuICAgIHJldHVybiByYW5raW5nW3JhbmtpbmdJdGVtXTtcbiAgfSk7XG5cbiAgcmV0dXJuIF8uc29ydEJ5KHJhbmtpbmdBcnJheSwgKGVsKSA9PiBlbC5zY29yZSkucmV2ZXJzZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGV2ZW50czogRXZlbnREYXRhID0ge1xuICBcImluaXQtbGl2ZVwiOiAoaW8sIHNvY2tldCwgZ2FtZVN0YXRlLCBtc2cpID0+IHtcbiAgICBzb2NrZXQuZGF0YSA9IHsgbGl2ZUluc3RhbmNlOiB0cnVlIH07XG4gICAgc29ja2V0LmVtaXQoXCJnYW1lLWRhdGFcIiwgZ2FtZVN0YXRlLmdhbWVEYXRhKTtcbiAgfSxcbiAgXCJlbmQtZ2FtZVwiOiAoaW8sIHNvY2tldCwgZ2FtZVN0YXRlLCBtc2csIHVwZGF0ZURhdGEpID0+IHtcbiAgICBnYW1lU3RhdGUuZ2FtZURhdGEuc3RhcnRlZCA9IGZhbHNlO1xuICAgIGdhbWVTdGF0ZS5nYW1lRGF0YS5xdWl6U3RhcnRlZCA9IGZhbHNlO1xuICAgIGdhbWVTdGF0ZS5nYW1lRGF0YS5xdWl6TnVtYmVyID0gLTE7XG4gICAgZ2FtZVN0YXRlLmdhbWVEYXRhLnN0YXJ0ZWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgZ2FtZVN0YXRlLmdhbWVEYXRhLnBpbiA9IFwiXCI7XG4gICAgT2JqZWN0LmtleXMoZ2FtZVN0YXRlLnBsYXllcnMpLmZvckVhY2goKHBLZXkpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJQbGF5ZXIgPSBnYW1lU3RhdGUucGxheWVyc1twS2V5XTtcbiAgICAgIGdhbWVTdGF0ZS5wbGF5ZXJzW3BLZXldID0ge1xuICAgICAgICAuLi5jdXJyUGxheWVyLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBzY29yZTogMCxcbiAgICAgICAgaXNJblJvb206IGZhbHNlLFxuICAgICAgfTtcbiAgICB9KTtcbiAgICBnYW1lU3RhdGUucGxheWVycyA9IF8ucGlja0J5KGdhbWVTdGF0ZS5wbGF5ZXJzLCAocCkgPT4ge1xuICAgICAgcmV0dXJuIHAuaXNPbmxpbmU7XG4gICAgfSk7XG4gICAgZ2FtZVN0YXRlLmNvdW50ZXIgPSBOT1RfQ09VTlRJTkc7XG4gICAgZ2FtZVN0YXRlLnF1aXpBbnN3ZXJzID0ge307XG4gICAgdXBkYXRlRGF0YShnYW1lU3RhdGUpO1xuICAgIGVtaXREYXRhKGdhbWVTdGF0ZSwgaW8pO1xuICB9LFxuICBcInN0YXJ0LWdhbWVcIjogKGlvLCBzb2NrZXQsIGdhbWVTdGF0ZSwgbXNnLCB1cGRhdGVEYXRhKSA9PiB7XG4gICAgZ2FtZVN0YXRlLmdhbWVEYXRhLnN0YXJ0ZWQgPSB0cnVlO1xuICAgIGdhbWVTdGF0ZS5nYW1lRGF0YS5xdWl6U3RhcnRlZCA9IGZhbHNlO1xuICAgIGdhbWVTdGF0ZS5nYW1lRGF0YS5zdGFydGVkVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGdhbWVTdGF0ZS5nYW1lRGF0YS5waW4gPSBfLnJhbmdlKDAsIDYpXG4gICAgICAubWFwKCgpID0+IF8ucmFuZG9tKDAsIDkpKVxuICAgICAgLmpvaW4oXCJcIik7XG4gICAgZ2FtZVN0YXRlLmNvdW50ZXIgPSBOT1RfQ09VTlRJTkc7XG4gICAgdXBkYXRlRGF0YShnYW1lU3RhdGUpO1xuICAgIGVtaXREYXRhKGdhbWVTdGF0ZSwgaW8pO1xuICB9LFxuICBcInN0YXJ0LXF1aXpcIjogKGlvLCBzb2NrZXQsIGdhbWVTdGF0ZSwgbXNnLCB1cGRhdGVEYXRhKSA9PiB7XG4gICAgZ2FtZVN0YXRlLmdhbWVEYXRhLnJlc3VsdFN0ZXAgPSAtMTtcbiAgICBnYW1lU3RhdGUuY291bnRlciA9IDM7XG4gICAgZ2FtZVN0YXRlLmdhbWVEYXRhLnF1aXpOdW1iZXIgPSBnYW1lU3RhdGUuZ2FtZURhdGEucXVpek51bWJlciArIDE7XG4gICAgZ2FtZVN0YXRlLmdhbWVEYXRhLnF1aXpTdGFydGVkID0gdHJ1ZTtcbiAgICBnYW1lU3RhdGUucXVpekFuc3dlcnNbZ2FtZVN0YXRlLmdhbWVEYXRhLnF1aXpOdW1iZXJdID0ge307XG4gICAgZ2FtZVN0YXRlLmdhbWVEYXRhLnRvdGFsUXVlc3Rpb25zID0gcXVpei5xdWVzdGlvbnMubGVuZ3RoO1xuICAgIGVtaXREYXRhKGdhbWVTdGF0ZSwgaW8pO1xuICAgIGlvLmVtaXQoXCJxdWl6LWNvdW50ZXJcIiwgR0FNRV9TVEFSVElORyk7XG4gICAgY29uc3QgY291bnRlckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaW8uZW1pdChcInF1aXotY291bnRlclwiLCBnYW1lU3RhdGUuY291bnRlcik7XG4gICAgICBpZiAoZ2FtZVN0YXRlLmNvdW50ZXIgPT09IDApIHtcbiAgICAgICAgY29uc3QgcXVpekl0ZW0gPSBxdWl6LnF1ZXN0aW9uc1tnYW1lU3RhdGUuZ2FtZURhdGEucXVpek51bWJlcl07XG4gICAgICAgIGdhbWVTdGF0ZS5xdWl6RGF0YSA9IHtcbiAgICAgICAgICBxOiBxdWl6SXRlbS5xdWVzdGlvbixcbiAgICAgICAgICB2aWRlbzogcXVpekl0ZW0udmlkZW8sXG4gICAgICAgICAgYW5zd2VyczpcbiAgICAgICAgICAgIHF1aXpJdGVtLmtleWJvYXJkID09PSBcIlRSVUVGQUxTRVwiID8gW1wiVlwiLCBcIkZcIl0gOiBxdWl6SXRlbS5vcHRpb25zISxcbiAgICAgICAgfTtcbiAgICAgICAgaW8uZW1pdChcInF1aXotZGF0YVwiLCBnYW1lU3RhdGUucXVpekRhdGEpO1xuICAgICAgICBjbGVhckludGVydmFsKGNvdW50ZXJJbnRlcnZhbCk7XG4gICAgICAgIGdhbWVTdGF0ZS5nYW1lRGF0YS5zdGFydGVkVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB1cGRhdGVEYXRhKGdhbWVTdGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnYW1lU3RhdGUuY291bnRlci0tO1xuICAgICAgICB1cGRhdGVEYXRhKGdhbWVTdGF0ZSk7XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG4gIH0sXG4gIFwiam9pbi1nYW1lXCI6IChpbywgc29ja2V0LCBnYW1lU3RhdGUsIG1zZywgdXBkYXRlRGF0YSkgPT4ge1xuICAgIGNvbnN0IGFkZHIgPSBzb2NrZXQuaGFuZHNoYWtlLmFkZHJlc3M7XG4gICAgaWYgKG1zZy5waW4gPT09IGdhbWVTdGF0ZS5nYW1lRGF0YS5waW4gJiYgZ2FtZVN0YXRlLmdhbWVEYXRhLnN0YXJ0ZWQpIHtcbiAgICAgIGdhbWVTdGF0ZS5wbGF5ZXJzW2FkZHJdLmlkID0gc29ja2V0LmlkO1xuICAgICAgZ2FtZVN0YXRlLnBsYXllcnNbYWRkcl0uaXNPbmxpbmUgPSB0cnVlO1xuICAgICAgZ2FtZVN0YXRlLnBsYXllcnNbYWRkcl0ubmFtZSA9IG1zZy5uYW1lO1xuICAgICAgZ2FtZVN0YXRlLnBsYXllcnNbYWRkcl0uaXNJblJvb20gPSB0cnVlO1xuICAgICAgdXBkYXRlRGF0YShnYW1lU3RhdGUpO1xuICAgICAgZW1pdERhdGEoZ2FtZVN0YXRlLCBpbyk7XG4gICAgfVxuICB9LFxuICBkaXNjb25uZWN0OiAoaW8sIHNvY2tldCwgZ2FtZVN0YXRlLCBtc2csIHVwZGF0ZURhdGEpID0+IHtcbiAgICBjb25zdCBhZGRyID0gc29ja2V0LmhhbmRzaGFrZS5hZGRyZXNzO1xuICAgIGdhbWVTdGF0ZS5wbGF5ZXJzW2FkZHJdLmlzT25saW5lID0gZmFsc2U7XG4gICAgdXBkYXRlRGF0YShnYW1lU3RhdGUpO1xuICAgIGVtaXREYXRhKGdhbWVTdGF0ZSwgaW8pO1xuICB9LFxuICBcImFuc3dlci1xdWVzdGlvblwiOiAoaW8sIHNvY2tldCwgZ2FtZVN0YXRlLCBhbnN3ZXJJbmRleCwgdXBkYXRlRGF0YSkgPT4ge1xuICAgIGNvbnN0IGFkZHIgPSBzb2NrZXQuaGFuZHNoYWtlLmFkZHJlc3M7XG4gICAgY29uc3QgYW5zd2VyU2NvcmUgPSBnZXRBbnN3ZXJTY29yZShnYW1lU3RhdGUsIGFuc3dlckluZGV4KTtcblxuICAgIGNvbnN0IGFuc3dlclJlc3VsdCA9IHtcbiAgICAgIGFuc3dlckluZGV4LFxuICAgICAgYW5zd2VyVGltZTogbmV3IERhdGUoKSxcbiAgICAgIGFuc3dlclNjb3JlLFxuICAgICAgYW5zd2VyRWxhcHNlZDogbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBnYW1lU3RhdGUuZ2FtZURhdGEuc3RhcnRlZFRpbWUsXG4gICAgfTtcblxuICAgIGlmICghZ2FtZVN0YXRlLnF1aXpBbnN3ZXJzW2dhbWVTdGF0ZS5nYW1lRGF0YS5xdWl6TnVtYmVyXSkge1xuICAgICAgZ2FtZVN0YXRlLnF1aXpBbnN3ZXJzW2dhbWVTdGF0ZS5nYW1lRGF0YS5xdWl6TnVtYmVyXSA9IHt9O1xuICAgIH1cblxuICAgIGdhbWVTdGF0ZS5xdWl6QW5zd2Vyc1tnYW1lU3RhdGUuZ2FtZURhdGEucXVpek51bWJlcl1bYWRkcl0gPSBhbnN3ZXJSZXN1bHQ7XG5cbiAgICB1cGRhdGVEYXRhKGdhbWVTdGF0ZSk7XG4gICAgZW1pdERhdGEoZ2FtZVN0YXRlLCBpbyk7XG4gIH0sXG4gIFwiZW5kLXF1aXpcIjogKGlvLCBzb2NrZXQsIGdhbWVTdGF0ZSwgbXNnLCB1cGRhdGVEYXRhKSA9PiB7XG4gICAgZ2FtZVN0YXRlLmNvdW50ZXIgPSBTSE9XX1JFU1VMVFM7XG4gICAgZ2FtZVN0YXRlLmdhbWVEYXRhLnJlc3VsdFN0ZXAgPSAwO1xuICAgIGNvbnN0IHF1aXpOdW1iZXIgPSBnYW1lU3RhdGUuZ2FtZURhdGEucXVpek51bWJlcjtcbiAgICBjb25zdCBxdWl6UXVlc3Rpb24gPSBxdWl6LnF1ZXN0aW9uc1txdWl6TnVtYmVyXTtcblxuICAgIGxldCBvcHRpb25zO1xuICAgIHN3aXRjaCAocXVpelF1ZXN0aW9uLmtleWJvYXJkKSB7XG4gICAgICBjYXNlIFwiQUJDRFwiOlxuICAgICAgICBvcHRpb25zID0gcXVpelF1ZXN0aW9uLm9wdGlvbnM/Lm1hcCgocSwgaSkgPT4gaSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIlRSVUVGQUxTRVwiOlxuICAgICAgICBvcHRpb25zID0gW3RydWUsIGZhbHNlXTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzQnlBbnN3ZXI6IFF1aXpSZXN1bHRBbnN3ZXJbXSA9IG9wdGlvbnMhLm1hcCgocSwgaSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYW5zd2VyQ29kZTogXy5pc0Jvb2xlYW4ocSlcbiAgICAgICAgICA/IFtcIlZcIiwgXCJGXCJdW2ldXG4gICAgICAgICAgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgaSksXG4gICAgICAgIHBlb3BsZTogT2JqZWN0LmtleXMoXG4gICAgICAgICAgXy5waWNrQnkoZ2FtZVN0YXRlLnF1aXpBbnN3ZXJzW3F1aXpOdW1iZXJdLCAoYWRkcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGFkZHIuYW5zd2VySW5kZXggPT09IHE7XG4gICAgICAgICAgfSlcbiAgICAgICAgKS5sZW5ndGgsXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgZ2FtZVN0YXRlLnF1aXpSZXN1bHQgPSB7XG4gICAgICB0aXRsZTogcXVpei50aXRsZSxcbiAgICAgIGNvcnJlY3RBbnN3ZXI6IHF1aXpRdWVzdGlvbi5hbnN3ZXIsXG4gICAgICBhbnN3ZXJzOiByZXN1bHRzQnlBbnN3ZXIsXG4gICAgfTtcblxuICAgIGNvbnN0IHJhbmtpbmcgPSBnZXRDdXJyZW50UmFua2luZyhnYW1lU3RhdGUucXVpekFuc3dlcnMsIGdhbWVTdGF0ZS5wbGF5ZXJzKTtcblxuICAgIGlvLmZldGNoU29ja2V0cygpLnRoZW4oKHNvY2tldHMpID0+IHtcbiAgICAgIGNvbnN0IGxpdmVTb2NrZXRzID0gc29ja2V0cy5maWx0ZXIoKHNvY2tldCkgPT4ge1xuICAgICAgICByZXR1cm4gc29ja2V0LmRhdGEubGl2ZUluc3RhbmNlO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGxpdmVTb2NrZXRzLmxlbmd0aCk7XG5cbiAgICAgIGxpdmVTb2NrZXRzLmZvckVhY2goKHNvY2tldCkgPT4ge1xuICAgICAgICBzb2NrZXQuZW1pdChcImRhdGEtcmFua2luZ1wiLCByYW5raW5nKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJlbWl0XCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdXBkYXRlRGF0YShnYW1lU3RhdGUpO1xuICAgIGVtaXREYXRhKGdhbWVTdGF0ZSwgaW8pO1xuICB9LFxuICBcIm5leHQtcmVzdWx0c3RlcFwiOiAoaW8sIHNvY2tldCwgZ2FtZVN0YXRlLCBtc2csIHVwZGF0ZURhdGEpID0+IHtcbiAgICBpZiAoZ2FtZVN0YXRlLmdhbWVEYXRhLnJlc3VsdFN0ZXAgPCAyKSB7XG4gICAgICBnYW1lU3RhdGUuZ2FtZURhdGEucmVzdWx0U3RlcCA9IGdhbWVTdGF0ZS5nYW1lRGF0YS5yZXN1bHRTdGVwICsgMTtcbiAgICAgIHVwZGF0ZURhdGEoZ2FtZVN0YXRlKTtcbiAgICAgIGVtaXREYXRhKGdhbWVTdGF0ZSwgaW8pO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudHNbXCJzdGFydC1xdWl6XCJdKGlvLCBzb2NrZXQsIGdhbWVTdGF0ZSwgbXNnLCB1cGRhdGVEYXRhKTtcbiAgICB9XG4gIH0sXG59O1xuIl0sIm5hbWVzIjpbIl8iLCJHQU1FX1NUQVJUSU5HIiwiTk9UX0NPVU5USU5HIiwiU0hPV19SRVNVTFRTIiwiZ2V0T25saW5lUGxheWVycyIsInBsYXllcnMiLCJwaWNrQnkiLCJ1c2VyIiwiaXNPbmxpbmUiLCJpc0luUm9vbSIsImdldEFuc3dlclNjb3JlIiwiZ2FtZVN0YXRlIiwiYW5zd2VySW5kZXgiLCJxTnVtYmVyIiwiZ2FtZURhdGEiLCJxdWl6TnVtYmVyIiwiY29ycmVjdEFuc3dlciIsInF1aXoiLCJxdWVzdGlvbnMiLCJhbnN3ZXIiLCJpc0NvcnJlY3QiLCJzY29yZSIsImFkZHJLZXlzIiwiT2JqZWN0Iiwia2V5cyIsInF1aXpBbnN3ZXJzIiwibGVuZ3RoIiwiZm9yRWFjaCIsImFkZHIiLCJhbnN3ZXJJdGVtIiwiY29ubmVjdFBsYXllciIsImlvIiwic29ja2V0IiwidXBkYXRlRGF0YSIsImhhbmRzaGFrZSIsImFkZHJlc3MiLCJpZCIsIm5hbWUiLCJlbWl0RGF0YSIsInJlcXVpcmUiLCJlbWl0IiwiY291bnRlciIsInF1aXpEYXRhIiwicXVpelJlc3VsdCIsImZldGNoU29ja2V0cyIsInRoZW4iLCJzb2NrZXRzIiwic29ja2V0SXRlbSIsImNsaWVudFF1aXpBbnN3ZXIiLCJhbnN3ZXJUaW1lIiwiRGF0ZSIsImFuc3dlclNjb3JlIiwiYW5zd2VyRWxhcHNlZCIsImdldFRpbWUiLCJnZXRDdXJyZW50UmFua2luZyIsImRhdGEiLCJyYW5raW5nIiwicXVpelEiLCJxdWl6UU4iLCJwYXJzZUludCIsIml0ZW0iLCJyb3VuZFRpbWUiLCJhbnN3ZXJlZFF1ZXN0aW9ucyIsInRpbWVBdmciLCJyYW5raW5nQXJyYXkiLCJtYXAiLCJyYW5raW5nSXRlbSIsInNvcnRCeSIsImVsIiwicmV2ZXJzZSIsImV2ZW50cyIsIm1zZyIsImxpdmVJbnN0YW5jZSIsInN0YXJ0ZWQiLCJxdWl6U3RhcnRlZCIsInN0YXJ0ZWRUaW1lIiwicGluIiwicEtleSIsImN1cnJQbGF5ZXIiLCJwIiwicmFuZ2UiLCJyYW5kb20iLCJqb2luIiwicmVzdWx0U3RlcCIsInRvdGFsUXVlc3Rpb25zIiwiY291bnRlckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJxdWl6SXRlbSIsInEiLCJxdWVzdGlvbiIsInZpZGVvIiwiYW5zd2VycyIsImtleWJvYXJkIiwib3B0aW9ucyIsImNsZWFySW50ZXJ2YWwiLCJkaXNjb25uZWN0IiwiYW5zd2VyUmVzdWx0IiwicXVpelF1ZXN0aW9uIiwiaSIsInJlc3VsdHNCeUFuc3dlciIsImFuc3dlckNvZGUiLCJpc0Jvb2xlYW4iLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJwZW9wbGUiLCJ0aXRsZSIsImxpdmVTb2NrZXRzIiwiZmlsdGVyIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./server_src/socket/events.ts\n");

/***/ }),

/***/ "(api)/./src/utils/const.ts":
/*!****************************!*\
  !*** ./src/utils/const.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GAME_STARTING\": () => (/* binding */ GAME_STARTING),\n/* harmony export */   \"NOT_COUNTING\": () => (/* binding */ NOT_COUNTING),\n/* harmony export */   \"SHOW_RESULTS\": () => (/* binding */ SHOW_RESULTS),\n/* harmony export */   \"buttonColors\": () => (/* binding */ buttonColors)\n/* harmony export */ });\nconst SHOW_RESULTS = -3;\nconst GAME_STARTING = -2;\nconst NOT_COUNTING = -1;\nconst buttonColors = [\n    \"#00501F\",\n    \"#6D172D\",\n    \"#103569\",\n    \"#26262D\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvY29uc3QudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFPLE1BQU1BLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN4QixNQUFNQyxhQUFhLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDekIsTUFBTUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLE1BQU1DLFlBQVksR0FBRztJQUFDLFNBQVM7SUFBRSxTQUFTO0lBQUUsU0FBUztJQUFFLFNBQVM7Q0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmVhdC10aGUtbXVzaWMvLi9zcmMvdXRpbHMvY29uc3QudHM/N2MwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgU0hPV19SRVNVTFRTID0gLTM7XG5leHBvcnQgY29uc3QgR0FNRV9TVEFSVElORyA9IC0yO1xuZXhwb3J0IGNvbnN0IE5PVF9DT1VOVElORyA9IC0xO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkNvbG9ycyA9IFtcIiMwMDUwMUZcIiwgXCIjNkQxNzJEXCIsIFwiIzEwMzU2OVwiLCBcIiMyNjI2MkRcIl07XG4iXSwibmFtZXMiOlsiU0hPV19SRVNVTFRTIiwiR0FNRV9TVEFSVElORyIsIk5PVF9DT1VOVElORyIsImJ1dHRvbkNvbG9ycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/utils/const.ts\n");

/***/ }),

/***/ "(api)/./server_src/q001.json":
/*!******************************!*\
  !*** ./server_src/q001.json ***!
  \******************************/
/***/ ((module) => {

module.exports = JSON.parse('{"active":true,"title":"The first quiz","questions":[{"active":true,"question":"What is the name of the artist?","keyboard":"ABCD","answer":0,"options":["Maluma","Ozuna","Daddy Yankee","Nicky Jam"],"video":"question_000.mp4"},{"active":true,"question":"What is the missing word?","keyboard":"ABCD","answer":2,"options":["quiero","suave","suavecito","pasito"],"video":"question_001.mp4"},{"active":true,"question":"What is the title of song?","keyboard":"ABCD","answer":1,"options":["Un Beso","Carrettera","Corason","Mi Culpa"],"video":"question_002.mp4"},{"active":true,"question":"The author of song is Pharrell Williams?","keyboard":"TRUEFALSE","answer":false,"video":"question_003.mp4"},{"active":true,"question":"Find the title of song!","keyboard":"ABCD","answer":3,"options":["Around around","Around the word","The world","Around the world"],"video":"question_004.mp4"}]}');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/socket.ts"));
module.exports = __webpack_exports__;

})();